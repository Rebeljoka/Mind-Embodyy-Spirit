{% extends "allauth/layouts/base.html" %}
{% load i18n %}
{% load allauth %}
{% load static %}

{% block head_title %}{% trans "Sign In" %}{% endblock head_title %}

{% block content %}
<section class="min-h-screen bg-base-100 flex items-center justify-center py-12 px-4">
	<div class="w-full max-w-md">
		<!-- Logo and Brand -->
		<a href="{% url 'index' %}" class="flex items-center justify-center mb-8">
			<img class="w-10 h-10 mr-3" src="{% static 'images/logo.webp' %}" alt="logo" />
			<span class="text-2xl font-bold">Const Collection</span>
		</a>

		<!-- Card -->
		<div class="card bg-base-200 shadow-xl">
			<div class="card-body">
				<h2 class="card-title text-2xl font-bold mb-6">
					{% trans "Sign in to your account" %}
				</h2>

				<form method="post" action="{% url 'account_login' %}" class="space-y-4">
					{% csrf_token %}
					
					{% if form.non_field_errors %}
					<div class="alert alert-error">
						<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
						</svg>
						<span>{{ form.non_field_errors }}</span>
					</div>
					{% endif %}
					
					{% if redirect_field_value %}
					<input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
					{% endif %}

					<!-- Email/Username Field -->
					<div class="form-control">
						<label class="label" for="id_login">
							<span class="label-text">{% trans "Email" %}</span>
						</label>
						<input 
							type="text" 
							name="login" 
							id="id_login" 
							class="input input-bordered w-full {% if form.login.errors %}input-error{% endif %}" 
							placeholder="name@company.com" 
							value="{{ form.login.value|default:'' }}" 
							required 
							autofocus
						/>
						{% if form.login.errors %}
						<label class="label">
							<span class="label-text-alt text-error">{{ form.login.errors }}</span>
						</label>
						{% endif %}
					</div>

					<!-- Password Field -->
					<div class="form-control">
						<label class="label" for="id_password">
							<span class="label-text">{% trans "Password" %}</span>
							<a href="{% url 'account_reset_password' %}" class="label-text-alt link link-primary">
								{% trans "Forgot password?" %}
							</a>
						</label>
						<input 
							type="password" 
							name="password" 
							id="id_password" 
							placeholder="••••••••" 
							class="input input-bordered w-full {% if form.password.errors %}input-error{% endif %}" 
							required 
						/>
						{% if form.password.errors %}
						<label class="label">
							<span class="label-text-alt text-error">{{ form.password.errors }}</span>
						</label>
						{% endif %}
					</div>

					<!-- Remember Me Checkbox -->
					<div class="form-control">
						<label class="label cursor-pointer justify-start gap-2">
							<input 
								type="checkbox" 
								name="remember" 
								id="id_remember" 
								class="checkbox checkbox-primary checkbox-sm"
								{% if form.remember.value %}checked{% endif %}
							/>
							<span class="label-text">{% trans "Remember me" %}</span>
						</label>
					</div>

					<!-- Submit Button -->
					<button type="submit" class="btn btn-primary w-full">
						{% trans "Sign in" %}
					</button>

					<!-- Sign Up Link -->
					<p class="text-center text-sm">
						{% trans "Don't have an account?" %}
						<a href="{% url 'account_signup' %}" class="link link-primary">
							{% trans "Sign up here" %}
						</a>
					</p>
				</form>
			</div>
		</div>
	</div>
</section>
{% endblock content %}
